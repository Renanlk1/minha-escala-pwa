<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no" />
    <title>Minha Escala - Manutenção</title>
    <meta name="description" content="Sistema em manutenção programada para expansão de infraestrutura.">
    <meta name="author" content="Minha Escala" />
    <meta name="theme-color" content="#000000" />
    
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="Minha Escala" />
    <link rel="icon" type="image/x-icon" href="https://storage.googleapis.com/gpt-engineer-file-uploads/LMWdoAOy9Dc81cx7uobgYaiWQ022/uploads/1764802933618-Logo minha escala.png">
    <link rel="manifest" href="/manifest.json" />

    <style>
      /* CSS Agressivo para tentar esconder o selo do Lovable */
      /* Alvo: qualquer div fixada no canto inferior direito */
      body > div[style*="position: fixed"][style*="bottom:"][style*="right:"],
      [class*="lovable-badge"],
      #lovable-badge-root {
        display: none !important;
        visibility: hidden !important;
        opacity: 0 !important;
        pointer-events: none !important;
        width: 0 !important;
        height: 0 !important;
        z-index: -99999 !important;
      }
      
      /* Garante fundo preto enquanto carrega */
      body, html {
          background-color: #000000;
          margin: 0;
          padding: 0;
          overflow: hidden; /* Trava a rolagem no iOS */
      }
    </style>

    <script>
      // VERSÃO SEGURA: Apenas limpa o cache antigo sem causar loop
      if ('serviceWorker' in navigator) {
        // Tenta desregistrar imediatamente qualquer SW ativo
        navigator.serviceWorker.getRegistrations().then(function(registrations) {
          for (let registration of registrations) {
            registration.unregister()
              .then(() => console.log("Service Worker antigo removido."))
              .catch(err => console.error("Erro ao remover SW:", err));
          }
        });
        
        // Tenta limpar o cache de armazenamento também
        if ('caches' in window) {
            caches.keys().then(function(names) {
                for (let name of names)
                    caches.delete(name);
            });
        }
      }
    </script>
  </head>

  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
